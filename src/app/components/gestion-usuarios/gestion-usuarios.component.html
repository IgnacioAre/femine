<main [style]="{'background-image':'url(\'../../../assets/img/fondoVioletaMovimiento.svg\')'}">


    <section class="shadow mx-4 bg-light rounded overflow-hidden">

        <h1 class="mb-4 py-3 ps-4 fs-2 text-light" [style]="{'background-color':config.backgroundTitle,'border-bottom':'5px solid '+config.baseColorDark}"><a routerLink="/admin" [style]="{'color':config.baseColorLight}">Administración</a> / Gestión de Clientes</h1>


        <div class="row pb-5">

            <div class="col col-12">

                <a id="elementoRegistrarCliente" [ngClass]="{'w-75' : window_width < 700,'w-50' : window_width > 700}" class="adminOption d-block text-center my-4 py-4 text-decoration-none m-auto fs-2 {{config.textColorClass}}" routerLink="/admin/registrar-cliente" [style]="{'background-color':config.baseColorLight,'box-shadow':'0px 0px 10px ' + config.baseColorLight}" #elementoRegistrarCliente (mouseenter)="adminOptionHover(elementoRegistrarCliente.id)" (mouseleave)="adminOptionLeave(elementoRegistrarCliente.id)">Registrar Cliente</a>

                <br>

                <div class="w-75 m-auto">
                    <table id="tablaGestionUsuarios" class="table table-striped table-secondary shadow display nowrap responsive w-100" [ngClass]="{'table-default' : config.colors == 'violet','table-secondary' : config.colors == 'dark'}">
                        <thead>
                            <tr>
                                <th *ngIf="window_width < 700">Nombre Completo</th>
                                <th *ngIf="window_width > 700">Nombre</th>
                                <th *ngIf="window_width > 700">Apellido</th>
                                <th *ngIf="window_width > 700">Cédula</th>
                                <th *ngIf="window_width > 700" style="width: 120px"></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngIf="usersCount == -1">
                                <td colspan="4" class="text-center">Cargando <img src="../../../assets/img/loader_violet.svg" alt="Loader" width="32px"></td>
                            </tr>
    
                            <tr *ngIf="usersCount == 0">
                                <td colspan="4" class="text-center">No se han encontrado resultados.</td>
                            </tr>

                            <tr class="dtr-control" *ngFor="let user of users">
                                <td *ngIf="window_width < 700" (click)="viewProfile(user.id)" [ngClass]="{'text-decoration-line-through text-danger': !user.active}">{{user.name + ' ' + user.subname}}</td>
                                <td *ngIf="window_width > 700" [ngClass]="{'text-decoration-line-through text-danger': !user.active}">{{user.name}}</td>
                                <td *ngIf="window_width > 700" [ngClass]="{'text-decoration-line-through text-danger': !user.active}">{{user.subname}}</td>
                                <td *ngIf="window_width > 700">{{user.document}}</td>
                                <td *ngIf="window_width > 700">
                                    <i (click)="editUser(user.id,user.name,user.subname)" role="button" matTooltip="Editar" class="bi bi-pencil-square fs-4 me-3"></i>
                                    <i *ngIf="user.active" (click)="deleteUser(user.id,user.name,user.subname)" role="button" matTooltip="Eliminar Cliente" class="bi bi-trash fs-4 me-3"></i>
                                    <i *ngIf="user.active" (click)="assignCard(user.id,user.name)" role="button" matTooltip="Vincular Tarjeta" class="bi bi-journal-plus fs-4 me-3"></i>
                                    <i *ngIf="user.active" (click)="viewProfile(user.id)" role="button" matTooltip="Ver Perfil" class="bi bi-person fs-4 me-3"></i>
                                    <i *ngIf="!user.active" role="button" matTooltip="Restaurar Cliente" class="bi bi-arrow-clockwise fs-4 me-3"></i>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

            </div>

        </div>

        

    </section>



    <div *ngIf="config.userRol != 'ADMIN'">
        <h1>No tienes permisos para acceder a esta página.</h1>
    </div>

</main>
